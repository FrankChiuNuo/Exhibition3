<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬ä¸‰å±•å€ï¼šé›™é¢é¡ (High-Fidelity)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root { 
            --bg: #0a0a0a; 
            --neon-green: #00ff41; 
            --neon-red: #ff3333;
            --warm-light: #f5e6d3; 
            --warm-text: #4a3b32;
            --glass: rgba(255, 255, 255, 0.05);
        }

        body { 
            background: var(--bg); 
            color: #ddd; 
            font-family: 'Noto Serif TC', serif; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            margin: 0; 
            overflow: hidden; 
            user-select: none;
        }

        /* èƒŒæ™¯å‹•æ…‹ç¶²æ ¼ */
        body::before {
            content: "";
            position: absolute;
            width: 200%; height: 200%;
            background: 
                linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: gridMove 60s linear infinite;
            z-index: -1;
            pointer-events: none;
        }
        @keyframes gridMove { 0% { transform: translate(0,0); } 100% { transform: translate(-40px, -40px); } }

        /* å°è¦½åˆ— */
        .nav { 
            margin-top: 50px; 
            display: flex; 
            gap: 20px; 
            z-index: 20; 
            background: rgba(0,0,0,0.6);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid #333;
            backdrop-filter: blur(10px);
        }
        
        .nav button { 
            background: transparent; 
            border: none; 
            color: #666; 
            padding: 8px 16px; 
            cursor: pointer; 
            transition: 0.4s; 
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .nav button::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; width: 0%; height: 2px;
            background: var(--neon-green);
            transition: 0.3s;
        }

        .nav button:hover, .nav button.active { 
            color: var(--neon-green); 
            text-shadow: 0 0 10px rgba(0,255,65,0.5);
        }
        
        .nav button.active::after { width: 100%; }

        /* é¡åƒèˆå° */
        .mirror-container { 
            width: 85vw; 
            max-width: 900px; 
            height: 500px; 
            border: 1px solid #333; 
            margin-top: 40px; 
            position: relative; 
            background: #000; 
            overflow: hidden; 
            box-shadow: 0 0 50px rgba(0,0,0,0.8); 
            border-radius: 4px;
        }
        
        /* çœŸå¯¦å±¤ (Warm) */
        .real-layer { 
            position: absolute; 
            width: 100%; height: 100%; 
            background: radial-gradient(circle at center, var(--warm-light), #dccbb5); 
            color: var(--warm-text); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            padding: 60px; 
            box-sizing: border-box; 
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
        }
        
        .real-layer.active { opacity: 1; }

        .real-icon { 
            font-size: 5rem; 
            margin-bottom: 25px; 
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1));
            animation: floatIcon 6s ease-in-out infinite;
        }
        @keyframes floatIcon { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .real-quote { 
            font-size: 1.5rem; 
            line-height: 1.8; 
            font-weight: bold; 
            max-width: 650px; 
            position: relative;
        }
        
        .real-quote::before, .real-quote::after {
            content: '"';
            font-size: 4rem;
            opacity: 0.2;
            position: absolute;
            font-family: serif;
        }
        .real-quote::before { top: -20px; left: -30px; }
        .real-quote::after { bottom: -40px; right: -30px; }

        .real-name { 
            margin-top: 30px; 
            font-family: 'Share Tech Mono', monospace; 
            color: #88705a; 
            letter-spacing: 2px;
            border-top: 1px solid rgba(0,0,0,0.1);
            padding-top: 15px;
        }

        /* é›œè¨Šå±¤ (Noise) */
        .noise-layer { 
            position: absolute; 
            top: 0; left: 0; 
            width: 90%; 
            height: 100%; 
            background: #111; 
            overflow: hidden; 
            border-right: 2px solid var(--neon-green); 
            box-shadow: 5px 0 30px rgba(0, 255, 65, 0.2);
            z-index: 5;
        }

        /* å‹•æ…‹æ¨™ç±¤ */
        .tag { 
            position: absolute; 
            color: rgba(255,255,255,0.15); 
            white-space: nowrap; 
            font-family: 'Share Tech Mono', monospace; 
            font-size: 1.2rem;
            animation: drift 10s infinite linear alternate;
            cursor: default;
        }
        
        .tag.highlight { 
            color: var(--neon-red); 
            font-weight: bold; 
            opacity: 0.9; 
            font-size: 1.8rem; 
            text-shadow: 2px 0 5px rgba(255, 51, 51, 0.6); 
            z-index: 2; 
            animation: drift 8s infinite linear alternate, pulse 3s infinite;
        }

        @keyframes drift { 
            0% { transform: translate(0, 0) rotate(0deg); } 
            100% { transform: translate(10px, 10px) rotate(2deg); } 
        }
        @keyframes pulse { 0%, 100% { opacity: 0.9; } 50% { opacity: 0.5; } }

        /* é›·å°„æ‰‹æŠŠ */
        .handle { 
            position: absolute; 
            left: 90%; top: 0; bottom: 0;
            width: 40px; /* è§¸æ§å€ */
            margin-left: -20px;
            cursor: ew-resize; 
            z-index: 20; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .handle-line {
            width: 4px; height: 100%;
            background: var(--neon-green);
            box-shadow: 0 0 15px var(--neon-green), 0 0 30px var(--neon-green);
        }
        
        .handle-knob {
            position: absolute;
            width: 40px; height: 40px;
            border: 2px solid var(--neon-green);
            border-radius: 50%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--neon-green);
            box-shadow: 0 0 20px rgba(0,255,65,0.4);
            font-size: 1.2rem;
        }

        /* ç•™è¨€å€ */
        .input-section { 
            margin-top: 40px; 
            opacity: 0; 
            transition: all 0.8s cubic-bezier(0.22, 1, 0.36, 1); 
            text-align: center; 
            transform: translateY(30px); 
            pointer-events: none; 
            z-index: 20; 
            position: relative;
            background: rgba(0,0,0,0.8);
            padding: 20px 40px;
            border-radius: 10px;
            border: 1px solid #333;
        }
        
        .input-section.show { 
            opacity: 1; 
            transform: translateY(0); 
            pointer-events: auto; 
        }
        
        .input-wrapper {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        input { 
            padding: 15px; 
            width: 300px; 
            background: rgba(255,255,255,0.05); 
            border: 1px solid #444; 
            color: #fff; 
            border-radius: 4px; 
            outline: none; 
            font-family: inherit;
            font-size: 1rem;
            transition: 0.3s;
        }
        input:focus { border-color: var(--neon-green); box-shadow: 0 0 10px rgba(0,255,65,0.1); }

        button.send { 
            padding: 15px 30px; 
            background: var(--neon-green); 
            color: #000; 
            border: none; 
            cursor: pointer; 
            border-radius: 4px; 
            font-weight: bold; 
            font-family: 'Share Tech Mono', monospace;
            text-transform: uppercase;
            transition: 0.3s;
        }
        button.send:hover { box-shadow: 0 0 20px var(--neon-green); transform: scale(1.05); }

        /* æ˜Ÿç©ºç‰¹æ•ˆ */
        #stars-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        
        .star { 
            position: absolute; 
            color: rgba(255,255,255,0.3); 
            animation: float 12s linear forwards; 
            pointer-events: none; 
            font-size: 0.9rem; 
            white-space: nowrap;
            font-family: 'Noto Serif TC', serif;
        }
        
        .star.user-sent {
            color: var(--neon-green);
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 0 0 20px var(--neon-green);
            z-index: 100;
            animation: floatUser 6s ease-out forwards;
        }

        @keyframes float { from { transform: translateY(110vh) scale(0.8); opacity: 0; } 20% { opacity: 1; } to { transform: translateY(-10vh) scale(1); opacity: 0; } }
        @keyframes floatUser { from { transform: translateY(100vh) scale(0.5); opacity: 0; } 20% { opacity: 1; transform: translateY(60vh) scale(1.2); } 100% { transform: translateY(-20vh) scale(1); opacity: 0; } }

        /* Glitch éå ´ç‰¹æ•ˆ */
        .glitch-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 50;
            display: none;
            mix-blend-mode: hard-light;
        }
        
        .glitch-active {
            display: block;
            animation: glitch-anim 0.4s steps(5) forwards;
        }

        @keyframes glitch-anim {
            0% { clip-path: inset(20% 0 80% 0); transform: translate(-5px, 5px); }
            20% { clip-path: inset(60% 0 10% 0); transform: translate(5px, -5px); }
            40% { clip-path: inset(40% 0 50% 0); transform: translate(-5px, 5px); }
            60% { clip-path: inset(80% 0 5% 0); transform: translate(5px, -5px); }
            80% { clip-path: inset(10% 0 60% 0); transform: translate(-5px, 5px); }
            100% { clip-path: inset(0 0 0 0); transform: translate(0, 0); }
        }

    </style>
</head>
<body>

    <div class="nav">
        <button onclick="changeProfile(0)" class="active">åˆºé’å£¯æ¼¢</button>
        <button onclick="changeProfile(1)">ç¨å±…é•·è¼©</button>
        <button onclick="changeProfile(2)">è·¨æ€§åˆ¥è€…</button>
    </div>

    <div class="mirror-container" id="stage">
        <!-- Glitch éå ´å±¤ -->
        <div class="glitch-overlay" id="glitch"></div>

        <div class="real-layer" id="real">
            <div class="real-icon" id="icon"></div>
            <div class="real-quote" id="quote"></div>
            <div class="real-name" id="name"></div>
        </div>
        
        <div class="noise-layer" id="mask">
            <div id="tags-container"></div>
        </div>
        
        <div class="handle" id="handle">
            <div class="handle-line"></div>
            <div class="handle-knob">â†”</div>
        </div>
    </div>

    <div class="input-section" id="input-sec">
        <p style="color: #aaa; margin-bottom: 5px; font-family: 'Share Tech Mono';">SYSTEM MESSAGE</p>
        <h3 style="margin: 0 0 15px 0;">çœ‹è¦‹çœŸå¯¦å¾Œï¼Œä½ æƒ³ç”¨ä»€éº¼è©é‡æ–°å®šç¾©ä»–/å¥¹ï¼Ÿ</h3>
        <div class="input-wrapper">
            <input type="text" id="msg" placeholder="ä¾‹å¦‚ï¼šå‹‡æ•¢ã€æº«æŸ”ã€åšè‡ªå·±..." autocomplete="off">
            <button class="send" onclick="send()">é€å‡ºç¥ç¦</button>
        </div>
    </div>

    <div id="stars-bg"></div>

    <script>
        const profiles = [
            {
                icon: "ğŸ’ª", 
                name: "- é˜¿è™ (32æ­²), å¹¼å…’åœ’å¿—å·¥", 
                quote: "ã€Œå¤å¤©æˆ‘ä¹Ÿå …æŒç©¿é•·è¢–ï¼Œå› ç‚ºæ€•åš‡åˆ°ç­ä¸Šçš„å°æœ‹å‹ã€‚<br>æˆ‘æ‰‹è‡‚ä¸Šçš„åˆºé’ï¼Œæ˜¯ç‚ºäº†ç´€å¿µè»Šç¦éä¸–çš„å¼Ÿå¼Ÿã€‚ã€", 
                tags: ["æµæ°“", "8+9", "é»‘é“", "å¸æ¯’", "ç¤¾æœƒäº‚æº", "å‰ç§‘çŠ¯", "å…‡ç¥æƒ¡ç…", "æ’¿è§’", "æš´åŠ›", "æ²’æ•‘äº†", "ä¸å­¸å¥½", "æ··å¹«æ´¾", "å±éšªä»½å­", "ä½ç«¯äººå£", "æ²’å®¶æ•™", "ä¸å‹™æ­£æ¥­", "çœ‹èµ·ä¾†å¾ˆæ´¾", "å¯æ€•", "åˆºé¾åˆºé³³"]
            },
            {
                icon: "ğŸ‘“", 
                name: "- é™³çˆºçˆº (76æ­²), é€€ä¼‘å¸æ©Ÿ", 
                quote: "ã€Œæˆ‘å…¶å¯¦å¾ˆæƒ³å­¸æ€éº¼ç”¨æ‰‹æ©Ÿè½‰å¸³çµ¦å­«å­...<br>ä½†æˆ‘æ€•å•äº†åˆè¢«å«Œç…©ï¼Œåªèƒ½è‡ªå·±å»æ«ƒæª¯æ…¢æ…¢å¼„ã€‚ã€", 
                tags: ["è€å®³", "æƒ…ç·’å‹’ç´¢", "è·Ÿä¸ä¸Šæ™‚ä»£", "éº»ç…©", "æµªè²»è³‡æº", "å›ºåŸ·", "å€šè€è³£è€", "ä¸‰å¯¶", "éæ™‚", "ä¸è¬›ç†", "å‹•ä½œæ…¢", "ä½”ç”¨æ«ƒæª¯", "è€ç•ªç™²", "è½ä¸æ‡‚äººè©±", "é˜»ç¤™é€²æ­¥", "è€å¤æ¿", "é ‘å›º", "åªæœƒæ·»äº‚"]
            },
            {
                icon: "ğŸ³ï¸â€âš§ï¸", 
                name: "- Alice (26æ­²), è»Ÿé«”å·¥ç¨‹å¸«", 
                quote: "ã€Œæˆ‘å»å¥³å»è¢«è¶•å‡ºä¾†ï¼Œå»ç”·å»è¢«å˜²ç¬‘ã€‚<br>æˆ‘åŠªåŠ›å·¥ä½œã€æŒ‰æ™‚ç¹³ç¨…ï¼Œåªæ˜¯å¸Œæœ›èƒ½ä»¥éˆé­‚çœŸå¯¦çš„æ¨£å­ç”Ÿæ´»ï¼Œç‚ºä»€éº¼é€™éº¼é›£ï¼Ÿã€", 
                tags: ["è®Šæ…‹", "äººå¦–", "ä¸ç”·ä¸å¥³", "å™å¿ƒ", "æœ‰ç—…è¦é†«", "é•åè‡ªç„¶", "æ½›åœ¨ç½ªçŠ¯", "æ€§åˆ¥éŒ¯äº‚", "ä¸çŸ¥ç¾æ¥", "å¿ƒç†è®Šæ…‹", "ç”·æ‰®å¥³è£", "åšçœ¼çƒ", "ç¤¾æœƒæ¯’ç˜¤", "ä¸æ•¢é è¿‘", "å¥½æ€ª", "ç²¾ç¥ç•°å¸¸", "è®Šè£ç™–"]
            }
        ];

        let isDragging = false;
        let isInputShown = false;

        window.onload = () => {
            loadProfile(0, false); // åˆå§‹è¼‰å…¥ä¸æ’­ Glitch
            startFloatingStars();
        };

        // æ–°å¢ï¼šå¸¶æœ‰éå ´å‹•ç•«çš„åˆ‡æ›
        function changeProfile(index) {
            // æ’­æ”¾ Glitch ç‰¹æ•ˆ
            const glitch = document.getElementById('glitch');
            const realLayer = document.getElementById('real');
            
            glitch.classList.add('glitch-active');
            realLayer.classList.remove('active'); // å…ˆéš±è—çœŸå¯¦å±¤

            // 0.4ç§’å¾Œ (Glitch çµæŸ) åˆ‡æ›å…§å®¹
            setTimeout(() => {
                loadProfile(index, true);
                glitch.classList.remove('glitch-active');
            }, 400);
        }

        function loadProfile(index, animate) {
            document.querySelectorAll('.nav button').forEach((btn, i) => {
                btn.className = i === index ? 'active' : '';
            });

            const p = profiles[index];
            document.getElementById('icon').innerText = p.icon;
            document.getElementById('quote').innerHTML = p.quote;
            document.getElementById('name').innerText = p.name;
            
            generateTags(p.tags);
            
            // é¡¯ç¤ºçœŸå¯¦å±¤ (å¦‚æœæ˜¯åˆå§‹è¼‰å…¥ç›´æ¥é¡¯ç¤ºï¼Œå¦å‰‡æ·¡å…¥)
            const realLayer = document.getElementById('real');
            if (animate) {
                setTimeout(() => realLayer.classList.add('active'), 100);
            } else {
                realLayer.classList.add('active');
            }

            // é‡ç½®æ»‘æ¡¿
            updateSlider(90);
            
            // éš±è—ç•™è¨€å€ä¸¦æ¸…ç©º
            document.getElementById('input-sec').className = 'input-section';
            document.getElementById('msg').value = ''; 
            isInputShown = false;

            // æ¸…ç©ºèƒŒæ™¯æ˜Ÿæ˜Ÿ
            document.getElementById('stars-bg').innerHTML = '';
        }

        function generateTags(tags) {
            const container = document.getElementById('tags-container');
            container.innerHTML = "";
            
            let shuffledTags = [...tags].sort(() => 0.5 - Math.random());
            while (shuffledTags.length < 35) {
                shuffledTags = shuffledTags.concat([...tags].sort(() => 0.5 - Math.random()));
            }

            for(let i=0; i<35; i++) {
                let span = document.createElement('span');
                span.className = 'tag';
                if(Math.random() > 0.8) span.classList.add('highlight');
                span.innerText = shuffledTags[i];
                
                // æ›´è‡ªç„¶çš„éš¨æ©Ÿåˆ†ä½ˆ
                span.style.left = Math.random() * 90 + '%';
                span.style.top = Math.random() * 90 + '%';
                
                // å¤§å°èˆ‡æ—‹è½‰
                let size = Math.random() * 1.5 + 0.8;
                span.style.fontSize = size + 'rem';
                span.style.opacity = Math.random() * 0.5 + 0.2; // éš¨æ©Ÿé€æ˜åº¦
                span.style.transform = `rotate(${Math.random() * 40 - 20}deg)`;
                
                // ç‚ºæ¯å€‹æ¨™ç±¤è¨­ç½®ä¸åŒçš„å‹•ç•«å»¶é²ï¼Œè®“é£„å‹•çœ‹èµ·ä¾†æ›´è‡ªç„¶
                span.style.animationDelay = (Math.random() * 5) + 's';
                
                container.appendChild(span);
            }
        }

        const stage = document.getElementById('stage');
        const handle = document.getElementById('handle');

        handle.addEventListener('mousedown', (e) => { isDragging = true; e.preventDefault(); });
        window.addEventListener('mouseup', () => isDragging = false);
        window.addEventListener('mousemove', onMove);

        handle.addEventListener('touchstart', (e) => { isDragging = true; e.preventDefault(); });
        window.addEventListener('touchend', () => isDragging = false);
        window.addEventListener('touchmove', onMove);

        function onMove(e) {
            if(!isDragging) return;
            let clientX = e.clientX || e.touches[0].clientX;
            let rect = stage.getBoundingClientRect();
            let x = clientX - rect.left;
            let p = (x / rect.width) * 100;
            if(p < 0) p = 0;
            if(p > 100) p = 100;
            updateSlider(p);
        }

        function updateSlider(p) {
            document.getElementById('mask').style.width = p + '%';
            document.getElementById('handle').style.left = p + '%';
            
            // ç•¶æ»‘é–‹é¡¯ç¤ºè¶…é 85% (å³ mask < 15%)
            if(p < 15 && !isInputShown) {
                isInputShown = true;
                document.getElementById('input-sec').className = 'input-section show';
            }
        }

        function send() {
            let val = document.getElementById('msg').value.trim();
            if(!val) return;
            
            createStar(val, true);
            document.getElementById('msg').value = "";
        }

        function startFloatingStars() {
            const presets = ["è¾›è‹¦äº†", "å‹‡æ•¢", "æº«æŸ”", "ä¸å­¤å–®", "åŠ æ²¹", "å€¼å¾—è¢«æ„›", "æ…¢æ…¢ä¾†", "å¾ˆæ£’", "åšè‡ªå·±", "å …å¼·"];
            setInterval(() => {
                let text = presets[Math.floor(Math.random() * presets.length)];
                createStar(text, false);
            }, 2500);
        }

        function createStar(text, isUser) {
            let div = document.createElement('div');
            div.innerText = text;
            
            // éš¨æ©Ÿä½ç½®ï¼Œé¿å…å¤ªé é‚Šç·£
            div.style.left = Math.random() * 80 + 10 + '%';
            
            if(isUser) {
                div.className = 'star user-sent'; 
            } else {
                div.className = 'star';
                div.style.animationDuration = (Math.random() * 5 + 10) + 's'; // éš¨æ©Ÿé€Ÿåº¦
            }
            
            document.getElementById('stars-bg').appendChild(div);
            
            setTimeout(() => div.remove(), 15000);
        }
    </script>
</body>
</html>
